// Timers
@setvar! globalTimeout 650

// Potion Settings
@setvar! drink_red 1
@setvar! drink_red_stam 75
@setvar! drink_heal_hp 60

if skill 'Alchemy' >= 80
    @setvar! drink_white 1
    @setvar! drink_blue 1
    @setvar! drink_black 1
    @setvar! drink_Panacea 1
else
    @setvar! drink_white 0
    @setvar! drink_blue 0
    @setvar! drink_black 0
    @setvar! drink_Panacea 0
endif

while not dead
    if findtype "tray" backpack as food
        if not findbuff "food satisfaction"
            overhead 'Eating Food!' 68  
            dclick food
            wait globalTimeout
        endif
    endif

    if hp != maxhp and bandaging = 0 
        if findtype "clean bandage%s%" backpack
            hotkey 'Bandage Self' 
            wait globalTimeout
        else
            overhead "Out of Bandages" 34
        endif
    endif 

    if paralyzed
        overhead 'Paralyzed!' 38
        if findtype "pouch" backpack 38 any any 
            say '[pouch'
            wait globalTimeout
        else
            overhead "Out of Trap Pouch" 34
        endif 
    endif
    
    if drink_Panacea = 1 and cooldown "Pancea" = 0
        if findbuff "bleed" or findbuff "disease"
            if findtype "Orange Potion" self
                wait globalTimeout
                overhead 'Drinking Panacea!' 48
                potion "cure"
                wait globalTimeout
            else
            overhead "Out of Cure Potion" 34
        endif 
        endif
    endif

    if poisoned
        if findtype "Orange Potion" self
            wait globalTimeout            
            overhead 'Drinking cure!' 48
            potion "cure" 
            wait globalTimeout      
        else
            overhead "Out of Cure Potion" 34
        endif 
    endif

    if hp < drink_heal_hp
        if findtype 3852 self as PotsHeal 
            getlabel PotsHeal LabelPotsHeal
            if 'next usable' in LabelPotsHeal
                sysmsg 'Unable to use Heal Potion Yet!' 33          
            else
                overhead 'Drinking heal!' 68  
                dclick PotsHeal
                wait globalTimeout  
            endif
        else
            overhead "Out of Healing Potion" 34
        endif 
    endif
    
    if drink_red = 1 and stam <  drink_red_stam
        if findtype "Red Potion" backpack as pot
            dclick pot
            wait 200
        else
            overhead "Out of Refresh Potion" 34
        endif
    endif

    if drink_white = 1
        if cooldown "Strength Potion" < 2000 or not findbuff "Strength"
            if findtype "White Potion" backpack as pot
                dclick pot
                wait 200
            else
                overhead "Out of Strength Potion" 34
            endif
        endif
    endif

    if drink_blue = 1
        if cooldown "Agility Potion" < 2000 or not findbuff "Agility"
            if findtype "Blue Potion" backpack as pot
                dclick pot
                wait 200
            else
                overhead "Out of Agility Potion" 34
            endif
        endif
    endif

    if drink_black = 1
        if cooldown "Magic Resist Potion" < 2000 or not findbuff "Magic Resist Potion"
            if findtype "Black Potion" backpack as pot
                dclick pot
                wait 200
            else
                overhead "Out of Magic Resist Potion" 34
            endif
        endif
    endif
   pause 250
endwhile 
